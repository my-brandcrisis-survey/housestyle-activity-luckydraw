<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>幸運大抽獎</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f4f4f4; margin: 0; }
        
        /* 輪盤外觀 */
        #wheel { width: 300px; height: 300px; border-radius: 50%; border: 5px solid #333; position: relative; transition: transform 4s cubic-bezier(0.1, 0, 0.2, 1); background: conic-gradient(
            #FFD700 0% 1%,    /* A: 金色 */
            #FF4500 1% 5%,    /* B: 橘紅 */
            #1E90FF 5% 13%,   /* C: 藍色 */
            #32CD32 13% 30%,  /* D: 綠色 */
            #808080 30% 100%  /* E: 灰色 */
        ); }

        #pointer { width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-bottom: 30px solid red; position: absolute; top: -20px; z-index: 10; }

        .controls { margin-top: 30px; text-align: center; }
        button { padding: 10px 25px; font-size: 18px; cursor: pointer; background: #e63946; color: white; border: none; border-radius: 5px; }
        button:disabled { background: #ccc; }
        #result { margin-top: 20px; font-size: 24px; font-weight: bold; color: #333; height: 30px; }
    </style>
</head>
<body>

    <div id="pointer"></div>
    <div id="wheel"></div>

    <div class="controls">
        <button id="drawBtn">點我抽獎！</button>
        <div id="result"></div>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const btn = document.getElementById('drawBtn');
        const resultText = document.getElementById('result');

        // 定義獎項與機率區間 (由小到大累加)
        const prizes = [
            { name: "A獎 (超級大獎)", weight: 1,  deg: 0 },    // 0-1
            { name: "B獎", weight: 4,  deg: 10 },   // 1-5
            { name: "C獎", weight: 8,  deg: 40 },   // 5-13
            { name: "D獎", weight: 17, deg: 100 },  // 13-30
            { name: "E獎 (銘謝惠顧)", weight: 70, deg: 240 }  // 30-100
        ];

        let currentRotation = 0;

        btn.addEventListener('click', () => {
            btn.disabled = true;
            resultText.innerText = "旋轉中...";

            // 1. 產生 0-99 的隨機數
            const random = Math.random() * 100;
            let selected;

            // 2. 判定機率邏輯
            if (random < 1) selected = prizes[0];
            else if (random < 5) selected = prizes[1];
            else if (random < 13) selected = prizes[2];
            else if (random < 30) selected = prizes[3];
            else selected = prizes[4];

            // 3. 計算旋轉角度 (基本 5 圈 + 獎項對應角度)
            // 轉盤逆時針旋轉，所以角度要加負號或計算偏差
            const extraDeg = 360 - (selected.deg + (Math.random() * 5)); // 加點隨機偏移感
            currentRotation += (360 * 5) + extraDeg; 

            wheel.style.transform = `rotate(${currentRotation}deg)`;

            // 4. 動畫結束後顯示結果
            setTimeout(() => {
                resultText.innerText = `恭喜獲得：${selected.name}`;
                btn.disabled = false;
            }, 4000);
        });
    </script>
</body>
</html>
