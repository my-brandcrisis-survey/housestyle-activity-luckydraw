<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>å¥½æ™‚ä»£è¡›æµ´ æ–°æ˜¥æ´»å‹•å¹¸é‹å¤§è½‰ç›¤ - æ»¿é¡8888å³å¯æŠ½çä¸€æ¬¡</title>
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: "Microsoft JhengHei", sans-serif;
Â  Â  Â  Â  Â  Â  background-color: #f4f4f4;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card {
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 450px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* æ¨™é¡Œæ¨£å¼èª¿æ•´ */
Â  Â  Â  Â  .title-line1 {
Â  Â  Â  Â  Â  Â  color: #1e90ff;
Â  Â  Â  Â  Â  Â  font-size: 28px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  .title-line2 {
Â  Â  Â  Â  Â  Â  color: #1e90ff;
Â  Â  Â  Â  Â  Â  font-size: 28px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin: 5px 0 0 0;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  .subtitle { color: #666; margin: 10px 0 30px; font-size: 16px; }

Â  Â  Â  Â  .wheel-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 320px;
Â  Â  Â  Â  Â  Â  height: 320px;
Â  Â  Â  Â  Â  Â  margin: 0 auto 30px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ç•«å¸ƒ */
Â  Â  Â  Â  #wheel {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  transform: rotate(-90deg); /* è®“ç¬¬ä¸€å€‹çé …å¾æ­£ä¸Šæ–¹é–‹å§‹è¨ˆç®— */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* æ°´æ»´å½¢æŒ‡é‡ */
Â  Â  Â  Â  .pointer-box {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%) rotate(180deg);Â 
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  }

Â  Â  Â  Â  .pointer-svg {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
Â  Â  Â  Â  }

Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  background: #ff6600;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 12px 60px;
Â  Â  Â  Â  Â  Â  font-size: 20px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: 0.3s;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  button:hover { background: #e65c00; transform: scale(1.05); }
Â  Â  Â  Â  button:disabled { background: #ccc; cursor: not-allowed; box-shadow: none; transform: none; }

Â  Â  Â  Â  #result {
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  min-height: 24px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .test-mode {
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  color: #e74c3c;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="card">
Â  Â  <span class="title-line1">å¥½æ™‚ä»£è¡›æµ´</span>
Â  Â  <span class="title-line2">æ–°æ˜¥æ´»å‹•å¹¸é‹å¤§è½‰ç›¤</span>
Â  Â  <p class="subtitle">å–®ç­†æ¶ˆè²»æ»¿ $8,888 å³å¯å•Ÿå‹•å¹¸é‹è¼ªç›¤</p>

Â  Â  <div class="wheel-container">
Â  Â  Â  Â  <div class="pointer-box">
Â  Â  Â  Â  Â  Â  <svg class="pointer-svg" viewBox="0 0 100 100">
Â  Â  Â  Â  Â  Â  Â  Â  <path d="M50 0 C30 0 15 25 15 45 C15 70 50 100 50 100 C50 100 85 70 85 45 C85 25 70 0 50 0 Z" fill="#3b5998" stroke="#ffd700" stroke-width="4"/>
Â  Â  Â  Â  Â  Â  Â  Â  <circle cx="50" cy="40" r="12" fill="#ffd700"/>
Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <canvas id="wheel" width="600" height="600"></canvas>
Â  Â  </div>

Â  Â  <button id="spinBtn">é–‹å§‹æŠ½ç</button>
Â  Â  <div id="result"></div>
Â  Â  <p class="test-mode">âš ï¸ ç›®å‰ç‚ºæ¸¬è©¦æ¨¡å¼ï¼šé‡æ–°æ•´ç†ç¶²é å³å¯å†æ¬¡æŠ½ç</p>
</div>

<script>
Â  Â  // æ¸¬è©¦æ¨¡å¼ä¸‹è‡ªå‹•æ¸…é™¤ç´€éŒ„
Â  Â  localStorage.removeItem('myResult');

Â  Â  const canvas = document.getElementById('wheel');
Â  Â  const ctx = canvas.getContext('2d');
Â  Â  const spinBtn = document.getElementById('spinBtn');
Â  Â  const resultDiv = document.getElementById('result');

Â  Â  // 1. è¨­å®šçé …ã€é¡è‰²èˆ‡æ©Ÿç‡ (Weight)
Â  Â  const prizes = [
Â  Â  Â  Â  { name: 'Aè³: å–®ç­†é‡‘é¡äº«8æŠ˜å„ªæƒ ', weight: 1, color: '#ff6600' },
Â  Â  Â  Â  { name: 'Bè³: ç²å¾—æŒ‡å®šé…ä»¶ä¹™å€‹', weight: 6, color: '#ffffff' },
Â  Â  Â  Â  { name: 'Cè³: ç²å¾—GROHEæ¸…æ½”åŠ‘ä¹™å€‹', weight: 10, color: '#ff6600' },
Â  Â  Â  Â  { name: 'Dè³: å–®ç­†é‡‘é¡äº«9æŠ˜å„ªæƒ ', weight: 23, color: '#ffffff' },
Â  Â  Â  Â  { name: 'Eè³: ç²å¾—è¡›ç”Ÿç´™å¥—ä¹™å€‹', weight: 60, color: '#ff6600' }
Â  Â  ];

Â  Â  const totalWeight = prizes.reduce((sum, p) => sum + p.weight, 0);
Â  Â  let isSpinning = false;

Â  Â  // æª¢æŸ¥æ˜¯å¦æŠ½é
Â  Â  const savedPrize = localStorage.getItem('myResult');
Â  Â  if (savedPrize) {
Â  Â  Â  Â  spinBtn.disabled = true;
Â  Â  Â  Â  resultDiv.innerHTML = `æ‚¨å·²åƒåŠ éæŠ½çï¼Œç²å¾—ï¼š<span style="color:#ff6600">${savedPrize}</span>`;
Â  Â  }

Â  Â  // 2. ç¹ªè£½è½‰ç›¤å‡½æ•¸
Â  Â  function drawWheel() {
Â  Â  Â  Â  const numPrizes = prizes.length;
Â  Â  Â  Â  const arc = (Math.PI * 2) / numPrizes;

Â  Â  Â  Â  prizes.forEach((p, i) => {
Â  Â  Â  Â  Â  Â  const angle = i * arc;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ç•«æ‰‡å½¢
Â  Â  Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  Â  Â  ctx.fillStyle = p.color;
Â  Â  Â  Â  Â  Â  ctx.moveTo(300, 300);
Â  Â  Â  Â  Â  Â  ctx.arc(300, 300, 300, angle, angle + arc);
Â  Â  Â  Â  Â  Â  ctx.fill();
Â  Â  Â  Â  Â  Â  ctx.strokeStyle = "#ddd";
Â  Â  Â  Â  Â  Â  ctx.lineWidth = 2;
Â  Â  Â  Â  Â  Â  ctx.stroke();

Â  Â  Â  Â  Â  Â  // ç•«æ–‡å­—
Â  Â  Â  Â  Â  Â  ctx.save();
Â  Â  Â  Â  Â  Â  ctx.translate(300, 300);
Â  Â  Â  Â  Â  Â  ctx.rotate(angle + arc / 2);
Â  Â  Â  Â  Â  Â  ctx.textAlign = "right";
Â  Â  Â  Â  Â  Â  ctx.fillStyle = (p.color === '#ffffff') ? '#ff6600' : '#ffffff';
Â  Â  Â  Â  Â  Â  ctx.font = "bold 40px Microsoft JhengHei";
Â  Â  Â  Â  Â  Â  ctx.fillText(p.name.split(':')[0], 250, 15); // é¡¯ç¤º Aè³, Bè³...
Â  Â  Â  Â  Â  Â  ctx.restore();
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // 3. æ ¹æ“šæ©Ÿç‡è¨ˆç®—çµæœ
Â  Â  function getWeightedResult() {
Â  Â  Â  Â  let random = Math.random() * totalWeight;
Â  Â  Â  Â  for (let i = 0; i < prizes.length; i++) {
Â  Â  Â  Â  Â  Â  if (random < prizes[i].weight) return i;
Â  Â  Â  Â  Â  Â  random -= prizes[i].weight;
Â  Â  Â  Â  }
Â  Â  Â  Â  return prizes.length - 1;
Â  Â  }

Â  Â  // 4. æŠ½çå‹•ä½œ
Â  Â  spinBtn.onclick = () => {
Â  Â  Â  Â  if (isSpinning || localStorage.getItem('myResult')) return;

Â  Â  Â  Â  isSpinning = true;
Â  Â  Â  Â  spinBtn.disabled = true;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const prizeIndex = getWeightedResult();
Â  Â  Â  Â  const segmentDeg = 360 / prizes.length;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // è¨ˆç®—æ—‹è½‰åº¦æ•¸ (è‡³å°‘è½‰5åœˆ + æŠ½ä¸­çé …çš„è§’åº¦)
Â  Â  Â  Â  // æ¸›å» segmentDeg/2 æ˜¯ç‚ºäº†è®“æŒ‡é‡åœåœ¨æ‰‡å½¢æ­£ä¸­é–“
Â  Â  Â  Â  const rotation = 3600 + (360 - (prizeIndex * segmentDeg)) - (segmentDeg / 2);

Â  Â  Â  Â  canvas.style.transition = "transform 5s cubic-bezier(0.15, 0, 0.15, 1)";
Â  Â  Â  Â  canvas.style.transform = `rotate(${rotation - 90}deg)`; // -90åº¦æ˜¯ä¿®æ­£åˆå§‹ç¹ªè£½åç§»

Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  const winner = prizes[prizeIndex].name;
Â  Â  Â  Â  Â  Â  resultDiv.innerHTML = `ğŸ‰ æ­å–œä¸­çï¼š<span style="color:#ff6600">${winner}</span>`;
Â  Â  Â  Â  Â  Â  localStorage.setItem('myResult', winner);
Â  Â  Â  Â  Â  Â  alert(`æ­å–œæ‚¨æŠ½ä¸­ï¼š${winner}ï¼\nè«‹æˆªåœ–å‘ŠçŸ¥åº—å“¡ã€‚`);
Â  Â  Â  Â  Â  Â  isSpinning = false;
Â  Â  Â  Â  }, 5200);
Â  Â  };

Â  Â  drawWheel();
</script>

</body>
</html>
